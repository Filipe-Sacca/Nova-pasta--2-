# üìÖ CRONOGRAMA DE IMPLEMENTA√á√ÉO - PLANO CERTO HUB INSIGHTS

**Data de Cria√ß√£o:** 11 de Agosto de 2025  
**Projeto:** Dashboard Analytics para Restaurantes  
**Cliente:** Integra√ß√£o completa com iFood APIs  

---

## üéØ RESUMO EXECUTIVO DO PROJETO

### Status Atual da Implementa√ß√£o:
- ‚úÖ **20% Conclu√≠do** - Authentication API + Merchant API funcionais
- ‚ùå **80% Pendente** - Financial API (cr√≠tica) + 3 m√≥dulos completos de neg√≥cio

### M√≥dulos do Cliente:
1. **M√ìDULO 1:** Integra√ß√£o iFood + Coleta de Dados *(20% implementado)*
2. **M√ìDULO 2:** Diagn√≥stico com IA *(0% implementado)*
3. **M√ìDULO 3:** Otimiza√ß√£o de Card√°pio com IA *(0% implementado)*
4. **M√ìDULO 4:** Automa√ß√£o de Cobran√ßa e Relat√≥rios *(0% implementado)*

---

## üìä MAPEAMENTO COMPLETO: IMPLEMENTADO vs PENDENTE

### üü¢ J√Å IMPLEMENTADO (Base Funcional)

#### üîê Authentication API - ‚úÖ COMPLETO
**Arquivos Implementados:**
- `hooks/useIfoodConfig.ts` - Gerenciamento de tokens
- `services/ifoodAuthService.ts` - Autentica√ß√£o OAuth2
- `IfoodApiConfig.tsx` - Interface de configura√ß√£o
- Tabela `ifood_tokens` - Persist√™ncia de tokens

**Funcionalidades Ativas:**
- ‚úÖ Client Credentials Flow
- ‚úÖ Authorization Code Flow  
- ‚úÖ Auto-renova√ß√£o de tokens
- ‚úÖ Valida√ß√£o de expira√ß√£o
- ‚úÖ Interface de configura√ß√£o de credenciais

---

#### üè™ Merchant API - ‚úÖ COMPLETO
**Arquivos Implementados:**
- `hooks/useIfoodMerchants.ts` - Gerenciamento de merchants
- `services/ifoodMerchantsService.ts` - Coleta de dados
- `IntegrationStatusCard.tsx` - Status da integra√ß√£o
- Tabela `ifood_merchants` - Dados dos restaurantes

**Funcionalidades Ativas:**
- ‚úÖ Lista de restaurantes por usu√°rio
- ‚úÖ Status operacional em tempo real
- ‚úÖ Dados completos (endere√ßo, contato, hor√°rios)
- ‚úÖ Sistema multi-tenant
- ‚úÖ Deduplica√ß√£o autom√°tica
- ‚úÖ Polling de atualiza√ß√£o (30s)

---

#### üíª Dashboard B√°sico - ‚úÖ PARCIAL
**Componentes Funcionais:**
- ‚úÖ `Dashboard.tsx` - Interface principal (dados fict√≠cios)
- ‚úÖ `ReportsModule.tsx` - Relat√≥rios PDF (dados fict√≠cios)
- ‚úÖ `Header.tsx` - Navega√ß√£o e filtros
- ‚úÖ Tabela `financial_metrics` - Estrutura base
- ‚úÖ Tabela `clients` - Gest√£o de clientes

**Limita√ß√µes Atuais:**
- ‚ùå KPIs usam dados fict√≠cios/est√°ticos
- ‚ùå Gr√°ficos n√£o refletem dados reais
- ‚ùå Relat√≥rios n√£o t√™m dados do iFood

---

## üî¥ PENDENTE DE IMPLEMENTA√á√ÉO (Cr√≠tico para o Neg√≥cio)

### üí∞ Financial API V3 - ‚ùå N√ÉO IMPLEMENTADO
> **üö® CR√çTICO:** 80% do valor do sistema depende desta API

**Arquivos a Criar:**
```
services/
‚îú‚îÄ‚îÄ ifoodFinancialService.ts        # Coleta dados financeiros
‚îú‚îÄ‚îÄ ifoodProcessor.ts               # Processamento espec√≠fico iFood
‚îî‚îÄ‚îÄ financialDataProcessor.ts       # Processamento gen√©rico

hooks/
‚îú‚îÄ‚îÄ useFinancialData.ts            # Dados detalhados por pedido
‚îú‚îÄ‚îÄ useRevenueAnalysis.ts          # An√°lise de receita
‚îî‚îÄ‚îÄ useFinancialSummary.ts         # Resumos financeiros

components/
‚îú‚îÄ‚îÄ FinancialDashboard.tsx         # Dashboard financeiro real
‚îú‚îÄ‚îÄ RevenueChart.tsx               # Gr√°fico de receita (dados reais)
‚îî‚îÄ‚îÄ CostAnalysis.tsx               # An√°lise de custos detalhada
```

**Tabelas a Criar:**
- `ifood_financial_detailed` - Dados detalhados por pedido
- `cost_breakdown` - An√°lise de custos por componente
- `revenue_trends` - Tend√™ncias de receita

**Endpoints a Implementar:**
- `/financial/v2.1/merchants/{merchantId}/sales`
- `/financial/v2/merchants/{merchantId}/salesAdjustments`
- `/financial/v2/merchants/{merchantId}/occurrences`
- `/financial/v2/merchants/{merchantId}/chargeCancellations`
- `/financial/v2/merchants/{merchantId}/maintenanceFees`

---

### üìñ Catalog API V2 - ‚ùå B√ÅSICO APENAS
> **Estado:** Tabela `products` existe mas incompleta

**Arquivos a Criar/Expandir:**
```
services/
‚îú‚îÄ‚îÄ ifoodCatalogService.ts         # Gest√£o completa de cat√°logo
‚îú‚îÄ‚îÄ productAnalysisService.ts      # An√°lise de performance
‚îî‚îÄ‚îÄ menuOptimizationService.ts     # Otimiza√ß√£o de card√°pio

hooks/
‚îú‚îÄ‚îÄ useCatalogManagement.ts        # Gest√£o de produtos
‚îú‚îÄ‚îÄ useProductPerformance.ts       # Performance de produtos  
‚îî‚îÄ‚îÄ useMenuOptimization.ts         # Sugest√µes de otimiza√ß√£o

components/
‚îú‚îÄ‚îÄ MenuManagement.tsx             # Gest√£o completa do card√°pio
‚îú‚îÄ‚îÄ ProductAnalysis.tsx            # An√°lise por produto
‚îú‚îÄ‚îÄ MenuOptimization.tsx           # Otimiza√ß√µes sugeridas
‚îî‚îÄ‚îÄ ProductEditor.tsx              # Editor de produtos
```

**Funcionalidades Faltantes:**
- ‚ùå Gest√£o completa de categorias
- ‚ùå Complementos e opcionais
- ‚ùå Produtos com varia√ß√µes (pizzas)
- ‚ùå An√°lise de performance por produto
- ‚ùå Sincroniza√ß√£o completa com iFood

---

### üéÅ Promotion API - ‚ùå N√ÉO IMPLEMENTADO

**Arquivos a Criar:**
```
services/
‚îú‚îÄ‚îÄ ifoodPromotionService.ts       # Gest√£o de promo√ß√µes
‚îî‚îÄ‚îÄ promotionAnalysisService.ts    # An√°lise de campanhas

hooks/
‚îú‚îÄ‚îÄ usePromotions.ts               # Gest√£o de promo√ß√µes
‚îî‚îÄ‚îÄ usePromotionAnalysis.ts        # An√°lise de performance

components/
‚îú‚îÄ‚îÄ PromotionManager.tsx           # Criador de promo√ß√µes
‚îú‚îÄ‚îÄ CampaignDashboard.tsx          # Dashboard de campanhas
‚îî‚îÄ‚îÄ PromotionAnalysis.tsx          # An√°lise de ROI
```

**Tabela a Criar:**
- `promotions` - Campanhas promocionais e m√©tricas

---

### üîî Webhook API - ‚ùå N√ÉO IMPLEMENTADO

**Arquivos a Criar:**
```
api/
‚îî‚îÄ‚îÄ webhooks/
    ‚îî‚îÄ‚îÄ ifood.ts                   # Endpoint webhook

services/
‚îú‚îÄ‚îÄ webhookProcessor.ts            # Processamento de eventos
‚îî‚îÄ‚îÄ realtimeNotifications.ts       # Notifica√ß√µes em tempo real

components/
‚îú‚îÄ‚îÄ RealtimeStatus.tsx             # Status em tempo real
‚îî‚îÄ‚îÄ NotificationCenter.tsx         # Centro de notifica√ß√µes
```

**Tabela a Criar:**
- `webhook_events` - Log de eventos recebidos

---

## üöÄ CRONOGRAMA DETALHADO DE EXECU√á√ÉO

### üìç FASE 1: FUNDA√á√ÉO CR√çTICA (Semanas 1-8)
> **Objetivo:** Tornar o dashboard funcional com dados reais

#### Semana 1-2: Financial API - Estrutura Base
**Prioridade:** üî¥ CR√çTICA
```bash
# Tarefas espec√≠ficas
‚ñ° Criar ifoodFinancialService.ts
‚ñ° Implementar endpoint /financial/v2.1/merchants/{merchantId}/sales
‚ñ° Criar tabela ifood_financial_detailed
‚ñ° Configurar estrutura de upsert por (client_id, date, order_number)
‚ñ° Testes b√°sicos de coleta de dados
```

#### Semana 3-4: Processamento e Agrega√ß√£o
```bash
‚ñ° Implementar ifoodProcessor.ts para dados espec√≠ficos
‚ñ° Sistema de processamento di√°rio √†s 18h
‚ñ° Valida√ß√£o de integridade de dados financeiros
‚ñ° Hook useFinancialData.ts para dados detalhados
‚ñ° Testes de volume com dados hist√≥ricos
```

#### Semana 5-6: Dashboard com Dados Reais
```bash
‚ñ° Substituir dados fict√≠cios em Dashboard.tsx
‚ñ° Implementar KPIs reais:
  - Receita bruta vs l√≠quida
  - Comiss√µes iFood detalhadas  
  - Ticket m√©dio real
  - Taxa de convers√£o
‚ñ° RevenueChart.tsx com dados reais
‚ñ° Valida√ß√£o vs painel oficial iFood
```

#### Semana 7-8: Otimiza√ß√£o e Valida√ß√£o
```bash
‚ñ° Sistema de cache para consultas pesadas
‚ñ° Alertas para discrep√¢ncias financeiras
‚ñ° Relat√≥rios PDF com dados reais
‚ñ° Testes de performance
‚ñ° Documenta√ß√£o t√©cnica
```

**Entreg√°vel Fase 1:** Dashboard funcional com dados financeiros reais do iFood

---

### üìç FASE 2: TEMPO REAL (Semanas 9-13)
> **Objetivo:** Eliminar polling e implementar notifica√ß√µes em tempo real

#### Semana 9-10: Infraestrutura Webhook
```bash
‚ñ° Criar endpoint /api/webhooks/ifood
‚ñ° Implementar valida√ß√£o X-IFood-Signature
‚ñ° Tabela webhook_events para auditoria
‚ñ° Sistema de retry para falhas de processamento
‚ñ° Testes de seguran√ßa e valida√ß√£o
```

#### Semana 11-12: Processamento de Eventos
```bash
‚ñ° Evento MERCHANT_STATUS_CHANGED
‚ñ° Evento FINANCIAL_SETTLEMENT  
‚ñ° Evento CATALOG_UPDATED
‚ñ° WebSocket para notifica√ß√µes no dashboard
‚ñ° Sistema de notifica√ß√µes push
```

#### Semana 13: Integra√ß√£o Dashboard
```bash
‚ñ° Atualiza√ß√µes autom√°ticas de KPIs
‚ñ° Status de conectividade em tempo real
‚ñ° Centro de notifica√ß√µes no header
‚ñ° Testes de estabilidade
```

**Entreg√°vel Fase 2:** Dashboard com atualiza√ß√µes em tempo real

---

### üìç FASE 3: CAT√ÅLOGO COMPLETO (Semanas 14-20)
> **Objetivo:** Gest√£o completa do card√°pio e an√°lise de produtos

#### Semana 14-15: Catalog API V2 Completa
```bash
‚ñ° Implementar todos endpoints Catalog V2
‚ñ° Expans√£o da tabela products com campos completos
‚ñ° Sistema de sincroniza√ß√£o completa
‚ñ° Gest√£o de categorias hier√°rquicas
```

#### Semana 16-17: Funcionalidades Avan√ßadas  
```bash
‚ñ° Gest√£o de complementos (complement_groups)
‚ñ° Produtos com varia√ß√µes (pizzas, bebidas)
‚ñ° Controle de disponibilidade por hor√°rio
‚ñ° Pre√ßos diferenciados por cat√°logo/canal
```

#### Semana 18-19: An√°lise de Performance
```bash
‚ñ° Correla√ß√£o vendas x produtos (via Financial API)
‚ñ° C√°lculo de margem de lucro por item
‚ñ° Ranking produtos mais/menos vendidos
‚ñ° An√°lise de sazonalidade
‚ñ° Sugest√µes de otimiza√ß√£o autom√°ticas
```

#### Semana 20: Interface de Gest√£o
```bash
‚ñ° MenuManagement.tsx - Gest√£o visual
‚ñ° ProductAnalysis.tsx - An√°lise detalhada
‚ñ° MenuOptimization.tsx - Sugest√µes IA
‚ñ° Sincroniza√ß√£o autom√°tica com iFood
```

**Entreg√°vel Fase 3:** Sistema completo de gest√£o e an√°lise de card√°pio

---

### üìç FASE 4: PROMO√á√ïES (Semanas 21-25)
> **Objetivo:** Sistema completo de campanhas promocionais

#### Semana 21-22: Promotion API
```bash
‚ñ° Implementar endpoints de promo√ß√µes
‚ñ° Tabela promotions com m√©tricas
‚ñ° Tipos: FIXED, PERCENTAGE, FIXED_PRICE, LXPY
‚ñ° Sistema de valida√ß√£o (m√°ximo 70% desconto)
```

#### Semana 23-24: Gest√£o e An√°lise
```bash
‚ñ° PromotionManager.tsx - Criador visual
‚ñ° Monitoramento de status em tempo real
‚ñ° An√°lise de ROI por campanha
‚ñ° A/B testing de promo√ß√µes
```

#### Semana 25: Dashboard Promocional
```bash
‚ñ° CampaignDashboard.tsx - Vis√£o geral
‚ñ° Relat√≥rios de impacto promocional
‚ñ° Integra√ß√£o com an√°lise de produtos
```

**Entreg√°vel Fase 4:** Sistema completo de promo√ß√µes e campanhas

---

### üìç FASE 5: IA DIAGN√ìSTICO - M√ìDULO 2 (Semanas 26-37)
> **Objetivo:** Diagn√≥stico autom√°tico com IA especializada

#### Semana 26-28: Base de Conhecimento IA
```bash
‚ñ° Integra√ß√£o OpenAI/Claude API
‚ñ° Base de conhecimento metodologia Plano Certo
‚ñ° Benchmarks setoriais por categoria de restaurante
‚ñ° Sistema de prompt engineering especializado
```

#### Semana 29-31: Algoritmos de An√°lise
```bash
‚ñ° An√°lise autom√°tica de padr√µes financeiros
‚ñ° Identifica√ß√£o de oportunidades (baixa convers√£o, produtos parados)
‚ñ° Sistema de score de performance (0-100)
‚ñ° Compara√ß√£o autom√°tica com benchmarks
```

#### Semana 32-35: Interface e Relat√≥rios IA
```bash
‚ñ° DiagnosticDashboard.tsx - An√°lise autom√°tica
‚ñ° Gera√ß√£o de relat√≥rios PDF com IA
‚ñ° Recomenda√ß√µes personalizadas por restaurante
‚ñ° Sistema de acompanhamento de melhorias
```

#### Semana 36-37: Valida√ß√£o e Refinamento
```bash
‚ñ° Valida√ß√£o de diagn√≥sticos com consultores Plano Certo
‚ñ° Ajuste fino dos modelos de IA
‚ñ° Testes A/B com diferentes abordagens
‚ñ° Sistema de feedback para melhoria cont√≠nua
```

**Entreg√°vel Fase 5:** M√ìDULO 2 - Sistema de diagn√≥stico autom√°tico funcionando

---

### üìç FASE 6: IA OTIMIZA√á√ÉO CARD√ÅPIO - M√ìDULO 3 (Semanas 26-36)
> **Execu√ß√£o paralela com Fase 5**

#### Semana 26-28: IA para Conte√∫do
```bash
‚ñ° Sistema de gera√ß√£o de descri√ß√µes de produtos
‚ñ° Otimiza√ß√£o autom√°tica de imagens (upscale, crop)
‚ñ° Sugest√µes de pre√ßos baseadas em dados de mercado
‚ñ° An√°lise de tend√™ncias gastron√¥micas
```

#### Semana 29-31: An√°lise Avan√ßada
```bash
‚ñ° Correla√ß√£o vendas x qualidade descri√ß√£o/imagem
‚ñ° A/B testing autom√°tico de varia√ß√µes de card√°pio
‚ñ° Sugest√µes de reorganiza√ß√£o de menu (ordem, categorias)
‚ñ° An√°lise preditiva de sazonalidade
```

#### Semana 32-35: Interface de Otimiza√ß√£o
```bash
‚ñ° MenuAIOptimizer.tsx - Editor inteligente
‚ñ° Preview de impacto das mudan√ßas sugeridas
‚ñ° Sistema de aprova√ß√£o de sugest√µes
‚ñ° Monitoramento p√≥s-implementa√ß√£o
```

#### Semana 36: Integra√ß√£o Final
```bash
‚ñ° Sincroniza√ß√£o autom√°tica com iFood ap√≥s aprova√ß√£o
‚ñ° Dashboard de performance p√≥s-otimiza√ß√£o
‚ñ° Sistema de aprendizado cont√≠nuo
```

**Entreg√°vel Fase 6:** M√ìDULO 3 - Otimiza√ß√£o autom√°tica de card√°pio com IA

---

### üìç FASE 7: AUTOMA√á√ÉO COBRAN√áA - M√ìDULO 4 (Semanas 33-40)
> **Execu√ß√£o paralela, independente das outras fases**

#### Semana 33-35: Integra√ß√µes Externas
```bash
‚ñ° WhatsApp Business API (Meta ou Twilio)
‚ñ° Sistema de email automatizado (Resend/SendGrid)
‚ñ° Gateway de pagamento (Stripe/PagSeguro/MercadoPago)
‚ñ° Sistema de gera√ß√£o de faturas (PDF autom√°tico)
```

#### Semana 36-38: Automa√ß√£o de Processos
```bash
‚ñ° BillingAutomation.tsx - Gest√£o de cobran√ßa
‚ñ° Gera√ß√£o autom√°tica baseada em dados Financial API
‚ñ° Envio programado via WhatsApp (lembretes, 2¬™ via)
‚ñ° Relat√≥rios autom√°ticos por email para clientes
‚ñ° Sistema de controle de inadimpl√™ncia
```

#### Semana 39-40: Dashboard de Cobran√ßa
```bash
‚ñ° BillingDashboard.tsx - Gest√£o financeira interna
‚ñ° Controle de pagamentos por cliente
‚ñ° M√©tricas de cobran√ßa e inadimpl√™ncia
‚ñ° Sistema de alertas de pagamento em atraso
‚ñ° Integra√ß√£o com contabilidade
```

**Entreg√°vel Fase 7:** M√ìDULO 4 - Sistema completo de automa√ß√£o de cobran√ßa

---

## üìà MARCOS E VALIDA√á√ÉO

### üéØ Marco 1 - Semana 8: "DASHBOARD FUNCIONAL"
**Crit√©rio de Aceita√ß√£o:**
- ‚úÖ KPIs do dashboard mostram dados reais do iFood
- ‚úÖ Relat√≥rios PDF cont√™m dados financeiros verdadeiros
- ‚úÖ Gr√°ficos refletem performance real dos restaurantes
- ‚úÖ Concilia√ß√£o financeira > 99.9% de precis√£o

### üéØ Marco 2 - Semana 13: "TEMPO REAL"
**Crit√©rio de Aceita√ß√£o:**  
- ‚úÖ Webhooks recebendo eventos iFood com < 5s lat√™ncia
- ‚úÖ Dashboard atualiza automaticamente sem refresh
- ‚úÖ Notifica√ß√µes push funcionando
- ‚úÖ Status de conectividade 99.9% uptime

### üéØ Marco 3 - Semana 25: "GEST√ÉO COMPLETA"
**Crit√©rio de Aceita√ß√£o:**
- ‚úÖ Card√°pio totalmente sincronizado com iFood
- ‚úÖ Promo√ß√µes criadas e monitoradas em tempo real
- ‚úÖ An√°lise de performance por produto funcionando
- ‚úÖ Sugest√µes de otimiza√ß√£o baseadas em dados

### üéØ Marco 4 - Semana 37: "IA FUNCIONANDO"
**Crit√©rio de Aceita√ß√£o:**
- ‚úÖ Diagn√≥sticos autom√°ticos com > 80% precis√£o
- ‚úÖ Otimiza√ß√µes de card√°pio gerando resultados mensur√°veis
- ‚úÖ Relat√≥rios inteligentes aprovados por consultores
- ‚úÖ Base de conhecimento Plano Certo integrada

### üéØ Marco 5 - Semana 40: "SISTEMA COMPLETO"
**Crit√©rio de Aceita√ß√£o:**
- ‚úÖ Automa√ß√£o de cobran√ßa funcionando fim-a-fim
- ‚úÖ Todos os 4 m√≥dulos do cliente integrados
- ‚úÖ Performance geral do sistema > 99.5% uptime
- ‚úÖ Sistema validado e pronto para produ√ß√£o

---

## ‚ö†Ô∏è RISCOS E DEPEND√äNCIAS CR√çTICAS

### üö® Riscos Altos
1. **Financial API Rate Limits** - iFood tem limite de 10 req/s
2. **Volume de Dados** - Restaurantes grandes podem gerar milhares de transa√ß√µes/dia
3. **Qualidade da IA** - Diagn√≥sticos precisam valida√ß√£o de especialistas
4. **Integra√ß√µes Externas** - WhatsApp/Email APIs podem mudar

### üîó Depend√™ncias Cr√≠ticas
- **Fase 5 e 6 dependem completamente da Fase 1** (Financial API)
- **M√≥dulo 3 precisa das Fases 3 e 4** (Catalog + Promotion)
- **Valida√ß√£o da IA precisa de consultores Plano Certo dispon√≠veis**
- **M√≥dulo 4 precisa de aprova√ß√£o de integra√ß√µes de pagamento**

---

## üí∞ ESTIMATIVA DE IMPACTO FINANCEIRO

### Valor Gerado por Fase:
- **Fase 1:** 60% do valor (dashboard funcional)
- **Fase 2:** 15% do valor (experi√™ncia em tempo real)  
- **Fase 3-4:** 15% do valor (gest√£o completa)
- **Fase 5-7:** 10% do valor (automa√ß√£o e IA)

### ROI Esperado por M√≥dulo:
- **M√≥dulo 1:** Economia de 80% tempo em relat√≥rios manuais
- **M√≥dulo 2:** Aumento m√©dio de 15% em receita via otimiza√ß√µes
- **M√≥dulo 3:** Melhoria de 25% em convers√£o de card√°pio
- **M√≥dulo 4:** Redu√ß√£o de 90% tempo em cobran√ßa manual

---

## üìû PR√ìXIMOS PASSOS IMEDIATOS

### Esta Semana (Semana 1):
1. **INICIAR FASE 1 IMEDIATAMENTE** - Criar ifoodFinancialService.ts
2. **Configurar ambiente de desenvolvimento** para Financial API
3. **Validar credenciais iFood** em ambiente de sandbox
4. **Definir estrutura da tabela** ifood_financial_detailed

### Semana Seguinte (Semana 2):
1. **Implementar primeiro endpoint** /financial/v2.1/sales
2. **Testes com dados reais** de restaurante piloto
3. **Configurar sistema de processamento** di√°rio
4. **Validar integridade** dos dados coletados

---

**üéØ FOCO ABSOLUTO:** Sem a Financial API, 80% do sistema n√£o funciona. Esta √© a prioridade #1 absoluta.

**üìä PROGRESSO:** Acompanhar semanalmente via este documento + reuni√µes de status.

**‚è±Ô∏è PRAZO TOTAL:** 40 semanas (~10 meses) para sistema completo e todos os m√≥dulos do cliente funcionais.

---

*Documento criado em 11/01/2025 - Baseado na documenta√ß√£o t√©cnica completa do projeto*